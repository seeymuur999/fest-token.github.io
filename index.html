
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>$FEST Vault | Retro Drop</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>
</head>
<body>
<div class="spinner-overlay" id="spinner">
    <img src="images/spinner.gif" alt="Loading $FEST TRUST COIN..." width="120">
</div>

<div class="container">
  <h1>$FEST Retro Vault</h1>
  <button onclick="connectWallet()">🪙 Connect Phantom Wallet</button>
  <p id="wallet-status">Wallet not connected</p>

  <div id="vault" class="locked">
    <h2>📚 Books (10 $FEST to unlock)</h2>
    <p><strong>Note:</strong> 10 $FEST will be sent to the treasury: <code>HgeiiagUMPDzB4Cuks9GP3EzBA1EZXivQyMXra5JLjmD</code></p>
    <ul>
      <li><a href="books/Trump_Hidden_Agenda_for_Moors_Handout.pdf" target="_blank">Trump Hidden Agenda</a></li>
      <li><a href="books/Unconstitutional_Case_Law_eBook.pdf" target="_blank">Unconstitutional Case Law</a></li>
      <li><a href="books/Money_is_Credit_eBook.pdf" target="_blank">Money is Credit</a></li>
      <li><a href="books/Debt_Discharge_Self_Lender_Expanded_Clean_by_Seeymuur_El.pdf" target="_blank">Debt Discharge</a></li>
      <li><a href="books/Show_Me_The_Note_FINAL_CLEAN_Guide_by_Seeymuur_El.pdf" target="_blank">Show Me The Note</a></li>
      <li><a href="books/Moors_vs_Muurs_A_Hidden_History_FINAL_by_Seeymuur_El.pdf" target="_blank">Moors vs Muurs</a></li>
      <li><a href="books/Trust_Law_Ebook.pdf" target="_blank">Trust Law eBook</a></li>
    </ul>

    <h2>🎬 Videos</h2>
    <iframe src="https://www.youtube.com/embed/tUqwqFazqO4" frameborder="0" allowfullscreen></iframe>
    <iframe src="https://www.youtube.com/embed/4fJEd6HE5aU" frameborder="0" allowfullscreen></iframe>
    <iframe src="https://www.youtube.com/embed/xFwJj9vfojE" frameborder="0" allowfullscreen></iframe>
    <iframe src="https://www.youtube.com/embed/vSEHim1f2s0" frameborder="0" allowfullscreen></iframe>
    <iframe src="https://www.youtube.com/embed/A9QDUbokCXE" frameborder="0" allowfullscreen></iframe>
    <iframe src="https://www.youtube.com/embed/xtPYCdA-KMw" frameborder="0" allowfullscreen></iframe>
    <iframe src="https://www.youtube.com/embed/PhMhIcFZEq4" frameborder="0" allowfullscreen></iframe>

    <h2>🗓 Sunday Night Class</h2>
    <p>💡 <strong>Upcoming:</strong> Live stream this Sunday @ 9PM EST. Topic: Trust Law + Estate Strategy 🔥</p>
  </div>
</div>

<script>
window.onload = () => {
  setTimeout(() => document.getElementById('spinner').style.display = 'none', 2000);
};

const FEST_MINT = "HgeiiagUMPDzB4Cuks9GP3EzBA1EZXivQyMXra5JLjmD";

async function connectWallet() {
  if (!window.solana) return alert("Phantom not found");

  try {
    const resp = await window.solana.connect();
    const pubkey = resp.publicKey.toString();
    document.getElementById('wallet-status').innerText = "Connected: " + pubkey;

    const conn = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl("mainnet-beta"));
    const accounts = await conn.getParsedTokenAccountsByOwner(
      new solanaWeb3.PublicKey(pubkey),
      { programId: new solanaWeb3.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA") }
    );

    let balance = 0;
    accounts.value.forEach(acc => {
      const info = acc.account.data.parsed.info;
      if (info.mint === FEST_MINT) {
        balance = parseFloat(info.tokenAmount.uiAmountString);
      }
    });

    if (balance >= 1000000) {
      document.getElementById('vault').classList.remove('locked');
      alert("🔥 Whale Mode: Full access unlocked.");
    } else if (balance >= 10) {
      document.getElementById('vault').classList.remove('locked');
      alert("✅ 10+ $FEST: Vault unlocked. Simulated 10 $FEST sent to Treasury.");
    } else {
      alert("❌ Minimum 10 $FEST required to unlock this vault.");
    }
  } catch (err) {
    console.error(err);
    alert("Connection failed.");
  }
}
</script>
</body>
</html>
